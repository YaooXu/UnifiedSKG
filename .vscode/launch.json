{
    // Use IntelliSense to learn about possible attributes.
    // Hover to view descriptions of existing attributes.
    // For more information, visit: https://go.microsoft.com/fwlink/?linkid=830387
    "version": "0.2.0",
    "configurations": [
        {
            "name": "Python Debugger: Current File",
            "type": "python",
            "request": "launch",
            "program": "${file}",
            "console": "integratedTerminal",
            "cwd": "${workspaceFolder}",
            "env": {
                "HF_HOME": "/mnt/publiccache/huggingface",
                "WANDB_MODE": "disabled",
                "PYDEVD_WARN_SLOW_RESOLVE_TIMEOUT": "1",
                "HF_DATASETS_OFFLINE": "1",
                "TRANSFORMERS_OFFLINE": "1",
                "NCCL_P2P_DISABLE": "1",
                "NCCL_IB_DISABLE": "1"
            }
        },
        {
            "name": "debug train uniskg",
            "type": "python",
            "request": "launch",
            "program": "/usr/local/bin/deepspeed",
            "justMyCode": false,
            "console": "integratedTerminal",
            "cwd": "${workspaceFolder}",
            "args": [
                "--include=localhost:0,1,2",
                "--master_port=29509",
                "/mnt/publiccache/yaoxu/UnifiedSKG/train.py",
                "--deepspeed", "deepspeed/ds_config_zero2.json",
                "--seed", "2",
                "--cfg", "Salesforce/T5_base_finetune_wikitq.cfg",
                "--run_name", "T5_base_finetune_wikitq",
                "--logging_strategy", "steps",
                "--logging_first_step", "true",
                "--logging_steps", "4",
                "--evaluation_strategy", "steps",
                "--eval_steps", "500",
                "--metric_for_best_model", "avr",
                "--greater_is_better", "true",
                "--save_strategy", "steps",
                "--save_steps", "500",
                "--save_total_limit", "1",
                "--load_best_model_at_end",
                "--gradient_accumulation_steps", "4",
                "--num_train_epochs", "50",
                "--adafactor", "false",
                "--learning_rate", "5e-5",
                "--do_train",
                "--do_eval",
                "--do_predict",
                "--predict_with_generate",
                "--output_dir", "output/debug",
                "--overwrite_output_dir",
                "--per_device_train_batch_size", "8",
                "--per_device_eval_batch_size", "16",
                "--generation_num_beams", "4",
                "--generation_max_length", "128",
                "--input_max_length", "1024",
                "--ddp_find_unused_parameters", "true"
            ],
            "env": {
                "HF_HOME": "/mnt/publiccache/huggingface",
                // "WANDB_MODE": "disabled",
                "PYDEVD_WARN_SLOW_RESOLVE_TIMEOUT": "1",
                "HF_DATASETS_OFFLINE": "1",
                "TRANSFORMERS_OFFLINE": "1",
                "NCCL_P2P_DISABLE": "1",
                "NCCL_IB_DISABLE": "1"
            }
        },
    ]
}